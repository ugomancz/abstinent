
<html>

<head>
    <title>Abstinent stats</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" href="data:,">
    <link rel="stylesheet" type="text/css" href="style.css">
</head>
<html>

<head>
    <title>Abstinent stats</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" href="data:,">
    <link rel="stylesheet" type="text/css" href="style.css">
</head>

<body>
    <h1><img src="images/cheddar.png" width="45" height="45" /></a> Abstinent
        stats &lt;3&nbsp;<img src="images/cheddar.png" width="45" height="45" /></a></h1>
    <p>Do you find yourself wondering how much has Abstinent been running lately?</p>
    <p>Well then you've come to the right page!</p>
    <table class="editorDemoTable">
        <tbody>
            <tr>
                <td><strong>Distance ran so far:&nbsp;</strong></td>
                <td><strong><span id="totalDistance">%TOTAL_DISTANCE%</span> m</strong></td>
            </tr>
            <tr>
                <td><strong>Top speed:&nbsp;</strong></td>
                <td><strong><span id="topSpeed">%TOP_SPEED%</span> m/s</strong> (<span id="topSpeedKm">%TOP_SPEED_KM%</span> km/h) <span id="topSpeedTimestamp">[%TOP_SPEED_TIMESTAMP%]</span></td>
            </tr>
            <tr>
                <td><strong>Current speed:&nbsp;</strong></td>
                <td><strong><span id="currentSpeed">%CURRENT_SPEED%</span> m/s</strong> (<span id="currentSpeedKm">%CURRENT_SPEED_KM%</span> km/h)</td>
            </tr>
        </tbody>
    </table>
    <p>Food of the day: <strong>Banana chips</strong></p>
    <p><img src="images/dinner.jpg" width="100" height="100" /></a></p>
    <p>Wanna help get abstinent some fresh banana chips? <a href="https://www.paypal.com/paypalme/ugoman"
            target="_blank" rel="noopener">Try here!</a></p>
    <p><img src="images/business.jpg" width="100" height="100" /></a></p>
    <p>Anything broken? Let us know, we'll try to fix it.</p>
    <p><img src="images/repair.png" width="100" height="100" /></a></p>
</body>


<script>
    function update_stats(){
        fetch('current_data.json')
        .then (res => res.json())
        .then(res => {
            console.log(res);
            document.getElementById("totalDistance").innerHTML = res.totalDistance;
            document.getElementById("topSpeed").innerHTML = res.topSpeed;
            document.getElementById("topSpeedKm").innerHTML = res.topSpeedKm;
            document.getElementById("topSpeedTimestamp").innerHTML = "["+new Date((res.topSpeedTimestamp+3600) * 1000).toISOString().slice(0, 19).replace('T', ' ')+"]";
            document.getElementById("currentSpeed").innerHTML = res.currentSpeed;
            document.getElementById("currentSpeedKm").innerHTML = res.currentSpeedKm;
        });
    }
    update_stats();
    setInterval(function () {
        update_stats();
    }, 2000);

</script>

</html>